<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script>
    // Ù†Ø¸Ø§Ù… ØªØ®Ø²ÙŠÙ† Ù…ÙˆØ­Ø¯ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‡Ø¬ÙŠÙ†Ø©
    function getStorage(key) {
        return sessionStorage.getItem(key) || localStorage.getItem(key);
    }

    function setStorage(key, value) {
        sessionStorage.setItem(key, value);
        localStorage.setItem(key, value);
    }
    </script>

    <style>
    /* Ø§Ù„Ù€ CSS Ù‡Ù†Ø§ */
    </style>
    <link rel="icon" type="image/x-icon" href="icon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Vault - Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f1f1f1;
        }
        
        .logo h1 {
            color: #2c3e50;
            font-size: 28px;
        }
        
        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 5px;
            margin-bottom: 30px;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .tab.active {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            color: #3498db;
        }
        
        .content {
            display: none;
        }
        
        .content.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 1px solid #e1e8ed;
        }
        
        .card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #34495e;
            font-weight: 500;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #219a52);
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .code-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .code-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        
        .code-item.used {
            border-left-color: #e74c3c;
            opacity: 0.7;
        }
        
        .user-list {
            display: grid;
            gap: 15px;
        }
        
        .user-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #27ae60;
        }
        
        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
        }
        
        .user-details {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            border: 1px solid #e1e8ed;
            display: none;
        }
        
        .user-details.active {
            display: block;
        }
        
        .details-tabs {
            display: flex;
            margin-bottom: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 4px;
        }
        
        .details-tab {
            flex: 1;
            text-align: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .details-tab.active {
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            color: #3498db;
        }
        
        .details-content {
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .details-content.active {
            display: block;
        }
        
        .data-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        
        .data-item h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .password-item {
            background: #e8f4fd;
            border-left-color: #3498db;
        }
        
        .note-item {
            background: #f0f8f0;
            border-left-color: #27ae60;
        }
        
        .image-item {
            background: #fff8e1;
            border-left-color: #f39c12;
        }
        
        .document-item {
            background: #f4e8f7;
            border-left-color: #9b59b6;
        }
        
        .message {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .login-form {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div id="loginForm" class="login-form">
        <div class="logo" style="text-align: center; margin-bottom: 30px;">
            <h1>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h1>
            <p>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</p>
        </div>
        
        <div id="message" class="message"></div>
        
        <div class="input-group">
            <label for="adminPassword">ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</label>
            <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        </div>
        
        <button class="btn" onclick="loginAdmin()" style="width: 100%;">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="adminPanel" style="display: none;">
        <div class="container">
            <div class="header">
                <div class="logo">
                    <h1>ğŸ” Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h1>
                </div>
                <button class="logout-btn" onclick="logoutAdmin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalUsers">0</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeCodes">0</div>
                    <div class="stat-label">Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù†Ø´Ø·Ø©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="usedCodes">0</div>
                    <div class="stat-label">Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</div>
                </div>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="showTab('codes')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</div>
                <div class="tab" onclick="showTab('users')">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                <div class="tab" onclick="showTab('settings')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
            </div>

            <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ -->
            <div id="codes" class="content active">
                <div class="card">
                    <h3>Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h3>
                    <div class="input-group">
                        <label>Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙˆØ¯ (6 Ø£Ø±Ù‚Ø§Ù…)</label>
                        <input type="text" id="manualCode" maxlength="6" 
                               oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                               placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§">
                    </div>
                    <button class="btn" onclick="addManualCode()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙˆØ¯</button>
                </div>

                <div class="card">
                    <h3>Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
                    <div class="code-list" id="codesList">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ù‡Ù†Ø§ -->
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
            <div id="users" class="content">
                <div class="card">
                    <h3>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h3>
                    <div class="user-list" id="usersList">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù‡Ù†Ø§ -->
                    </div>
                </div>
            </div>

          <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div id="settings" class="content">
    <!-- Ø²Ø± Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ -->
    <div class="card">
        <h3>ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©</h3>
        <p style="color: #666; margin-bottom: 15px;">Ù‚Ù… Ø¨Ø­ÙØ¸ ÙˆØ§Ø³ØªØ¹Ø§Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</p>
        <button class="btn" onclick="showBackupManager()" style="background: #17a2b8; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; width: 100%;">
            ÙØªØ­ Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        </button>
    </div>

    <!-- ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
    <div class="card">
        <h3>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h3>
        <div class="input-group">
            <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
            <input type="password" id="newAdminPassword" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©">
        </div>
        <div class="input-group">
            <label>ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input type="password" id="confirmAdminPassword" placeholder="Ø£Ø¹Ø¯ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        </div>
        <button class="btn" onclick="changeAdminPassword()">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
    </div>
</div>
    <script>
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†
        function checkAdminLogin() {
            const isLoggedIn = sessionStorage.getItem('adminLoggedIn') === 'true';
            if (isLoggedIn) {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadAdminData();
            }
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†
        function loginAdmin() {
// Ø¯Ø§Ù„Ø© Ù„ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†
function changeAdminPassword(newPassword) {
    // Ù‡Ù†Ø§ Ù…Ù…ÙƒÙ† Ù†Ø­ÙØ¸ ÙÙŠ Ù…Ù„Ù Ø£Ùˆ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª
    // Ù„ÙƒÙ† Ø­Ø§Ù„ÙŠØ§Ù‹ Ù‡Ù†Ø®Ù„ÙŠÙ‡Ø§ Ø«Ø§Ø¨ØªØ©
    alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø«Ø§Ø¨ØªØ© Ø­Ø§Ù„ÙŠØ§Ù‹: ' + ADMIN_PASSWORD);
}
            const password = document.getElementById('adminPassword').value;
            const storedPassword = localStorage.getItem('adminPassword') || 'Admin30123!';
            
            if (password === storedPassword) {
                sessionStorage.setItem('adminLoggedIn', 'true');
                showMessage('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                setTimeout(() => {
                    checkAdminLogin();
                }, 1000);
            } else {
                showMessage('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
            }
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ø£Ø¯Ù…Ù†
        function logoutAdmin() {
            sessionStorage.removeItem('adminLoggedIn');
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }

        // Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ ÙŠØ¯ÙˆÙŠ
        function addManualCode() {
            const manualCode = document.getElementById('manualCode').value;
            
            if (manualCode.length !== 6) {
                showMessage('Ø§Ù„ÙƒÙˆØ¯ Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† 6 Ø£Ø±Ù‚Ø§Ù…!', 'error');
                return;
            }
            
            // Ø¬ÙŠØ¨ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            let codes = JSON.parse(localStorage.getItem('activationCodes') || '[]');
            
            // Ø´ÙˆÙ Ø¥Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯ already
            if (codes.find(c => c.code === manualCode)) {
                showMessage('Ø§Ù„ÙƒÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯ already!', 'error');
                return;
            }
            
            // Ø¶ÙŠÙ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            const newCode = {
                code: manualCode,
                created: new Date().toISOString(),
                used: false,
                usedBy: null
            };
            
            codes.push(newCode);
            localStorage.setItem('activationCodes', JSON.stringify(codes));
            
            showMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            document.getElementById('manualCode').value = '';
            loadCodesList();
            updateStats();
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
        function loadAdminData() {
            updateStats();
            loadCodesList();
            loadUsersList();
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const codes = JSON.parse(localStorage.getItem('activationCodes') || '[]');
            
            document.getElementById('totalUsers').textContent = users.length;
            document.getElementById('activeCodes').textContent = codes.filter(c => !c.used).length;
            document.getElementById('usedCodes').textContent = codes.filter(c => c.used).length;
        }

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
        function loadCodesList() {
            const codes = JSON.parse(localStorage.getItem('activationCodes') || '[]');
            const codesList = document.getElementById('codesList');
            
            codesList.innerHTML = '';
            
            codes.sort((a, b) => new Date(b.created) - new Date(a.created)).forEach(code => {
                const codeItem = document.createElement('div');
                codeItem.className = `code-item ${code.used ? 'used' : ''}`;
                codeItem.innerHTML = `
                    <div>
                        <strong>${code.code}</strong>
                        <div style="font-size: 12px; color: #666;">
                            Ø£Ù†Ø´Ø¦ ÙÙŠ: ${new Date(code.created).toLocaleDateString('ar-EG')}
                            ${code.used ? ` | Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ: ${new Date(code.usedAt).toLocaleDateString('ar-EG')}` : ''}
                            ${code.usedBy ? ` | Ø¨ÙˆØ§Ø³Ø·Ø©: ${code.usedBy}` : ''}
                        </div>
                    </div>
                    <div style="color: ${code.used ? '#e74c3c' : '#27ae60'}; font-weight: bold;">
                        ${code.used ? 'Ù…Ø³ØªØ®Ø¯Ù…' : 'Ù†Ø´Ø·'}
                    </div>
                `;
                codesList.appendChild(codeItem);
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        function loadUsersList() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const usersList = document.getElementById('usersList');
            
            usersList.innerHTML = '';
            
            users.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div class="user-header">
                        <div class="user-info">
                            <div style="margin-bottom: 10px;">
                                <strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}</strong>
                                <div style="font-size: 12px; color: #666;">
                                    Ù…Ø³Ø¬Ù„ Ù…Ù†Ø°: ${new Date(user.createdAt).toLocaleDateString('ar-EG')}
                                </div>
                            </div>
                            <div style="font-size: 14px;">
                                <div>ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„: ${user.activationCode}</div>
                                <div>ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ù…Ø­ÙÙˆØ¸Ø©: ${user.data.passwords.length}</div>
                                <div>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©: ${user.data.notes.length}</div>
                                <div>ØµÙˆØ± Ù…Ø­ÙÙˆØ¸Ø©: ${user.data.images.length}</div>
                                <div>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©: ${user.data.documents.length}</div>
                            </div>
                        </div>
                        <div class="user-actions">
                           <button class="btn btn-sm btn-success" onclick="showUserDetails('${user.id}')">Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
<button class="btn btn-sm btn-danger" onclick="deleteUser('${user.id}')" style="background: #e74c3c; color: white; margin-right: 5px;">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </div>
                    <div id="userDetails-${user.id}" class="user-details">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ù†Ø§ -->
                    </div>
                `;
                usersList.appendChild(userItem);
            });
        }

        // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function showUserDetails(userId) {
            const detailsDiv = document.getElementById(`userDetails-${userId}`);
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.id === userId);
            
            if (!user) return;
            
            // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙØ§ØµÙŠÙ„
            if (detailsDiv.classList.contains('active')) {
                detailsDiv.classList.remove('active');
                return;
            }
            
            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰
            document.querySelectorAll('.user-details').forEach(detail => {
                detail.classList.remove('active');
            });
            
            detailsDiv.innerHTML = `
                <div class="details-tabs">
                    <div class="details-tab active" onclick="showUserData('${userId}', 'passwords')">ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±</div>
                    <div class="details-tab" onclick="showUserData('${userId}', 'notes')">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
                    <div class="details-tab" onclick="showUserData('${userId}', 'images')">Ø§Ù„ØµÙˆØ±</div>
                    <div class="details-tab" onclick="showUserData('${userId}', 'documents')">Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</div>
                </div>
                
                <div id="userPasswords-${userId}" class="details-content active">
                    ${loadUserPasswords(user.data.passwords)}
                </div>
                
                <div id="userNotes-${userId}" class="details-content">
                    ${loadUserNotes(user.data.notes)}
                </div>
                
                <div id="userImages-${userId}" class="details-content">
                    ${loadUserImages(user.data.images)}
                </div>
                
                <div id="userDocuments-${userId}" class="details-content">
                    ${loadUserDocuments(user.data.documents)}
                </div>
            `;
            
            detailsDiv.classList.add('active');
        }

        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
        function showUserData(userId, dataType) {
            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
            document.querySelectorAll(`#userDetails-${userId} .details-content`).forEach(content => {
                content.classList.remove('active');
            });
            
            // Ø¥Ù„ØºØ§Ø¡ ØªÙ†Ø´ÙŠØ· ÙƒÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll(`#userDetails-${userId} .details-tab`).forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            document.getElementById(`user${dataType.charAt(0).toUpperCase() + dataType.slice(1)}-${userId}`).classList.add('active');
            
            // ØªÙ†Ø´ÙŠØ· Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            event.target.classList.add('active');
        }

        // ØªØ­Ù…ÙŠÙ„ ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function loadUserPasswords(passwords) {
            if (passwords.length === 0) {
                return `
                    <div class="empty-state">
                        <div>ğŸ”</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ù…Ø­ÙÙˆØ¸Ø©</h3>
                    </div>
                `;
            }
            
            return passwords.map(password => `
                <div class="data-item password-item">
                    <h4>${password.appName}</h4>
                    <div><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> ${password.email}</div>
                    <div><strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> <span style="font-family: monospace; background: #e9ecef; padding: 2px 6px; border-radius: 4px;">${password.password}</span></div>
                    <div style="font-size: 12px; color: #666; margin-top: 8px;">
                        ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ: ${new Date(password.createdAt).toLocaleDateString('ar-EG')}
                    </div>
                </div>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function loadUserNotes(notes) {
            if (notes.length === 0) {
                return `
                    <div class="empty-state">
                        <div>ğŸ“</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©</h3>
                    </div>
                `;
            }
            
            return notes.map(note => `
                <div class="data-item note-item">
                    <h4>${note.title}</h4>
                    <div style="color: #666; line-height: 1.5; margin-bottom: 10px;">${note.content}</div>
                    <div style="font-size: 12px; color: #666;">
                        ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ: ${new Date(note.createdAt).toLocaleDateString('ar-EG')}
                    </div>
                </div>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function loadUserImages(images) {
            if (images.length === 0) {
                return `
                    <div class="empty-state">
                        <div>ğŸ–¼ï¸</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± Ù…Ø­ÙÙˆØ¸Ø©</h3>
                    </div>
                `;
            }
            
            return images.map(image => `
                <div class="data-item image-item">
                    <h4>${image.name}</h4>
                    <div style="margin-bottom: 10px;">
                        <img src="${image.data}" alt="${image.description}" style="max-width: 200px; max-height: 150px; border-radius: 8px;">
                    </div>
                    <div><strong>Ø§Ù„ÙˆØµÙ:</strong> ${image.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 8px;">
                        ØªÙ… Ø§Ù„Ø±ÙØ¹ ÙÙŠ: ${new Date(image.createdAt).toLocaleDateString('ar-EG')}
                    </div>
                </div>
            `).join('');
        }

        // ØªØ­Ù…ÙŠÙ„ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function loadUserDocuments(documents) {
            if (documents.length === 0) {
                return `
                    <div class="empty-state">
                        <div>ğŸ“„</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©</h3>
                    </div>
                `;
            }
            
            return documents.map(doc => `
                <div class="data-item document-item">
                    <h4>${doc.name}</h4>
                    <div><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${doc.type}</div>
                    <div><strong>Ø§Ù„Ø­Ø¬Ù…:</strong> ${(doc.size / 1024).toFixed(2)} ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª</div>
                    <div><strong>Ø§Ù„ÙˆØµÙ:</strong> ${doc.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 8px;">
                        ØªÙ… Ø§Ù„Ø±ÙØ¹ ÙÙŠ: ${new Date(doc.createdAt).toLocaleDateString('ar-EG')}
                    </div>
                </div>
            `).join('');
        }

        // ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø£Ø¯Ù…Ù†
        function changeAdminPassword() {
    const newPassword = document.getElementById('newAdminPassword').value;
    const confirmPassword = document.getElementById('confirmAdminPassword').value;
    
    if (!newPassword || !confirmPassword) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
        return;
    }
    
    if (newPassword !== confirmPassword) {
        showMessage('ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©', 'error');
        return;
    }
    
    if (newPassword.length < 6) {
        showMessage('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
        return;
    }
    
    // Ø§Ø³ØªØ®Ø¯Ù… sessionStorage Ø¨Ø¯Ù„ localStorage Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‡Ø¬ÙŠÙ†Ø©
    sessionStorage.setItem('adminPassword', newPassword);
    localStorage.setItem('adminPassword', newPassword); // Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
    
    showMessage('ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­', 'success');
    
    document.getElementById('newAdminPassword').value = '';
    document.getElementById('confirmAdminPassword').value = '';
}
        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showTab(tabName) {
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        checkAdminLogin();
    </script>
    <script>
// Ù†Ø¸Ø§Ù… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = 'admin.html';
    const savedContent = localStorage.getItem(`file_${currentPage}`);
    
    if (savedContent) {
        document.open();
        document.write(savedContent);
        document.close();
        return;
    }
    
    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØªØ­Ø¯ÙŠØ«ØŒ Ø´ØºÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
    if (typeof checkAdminLogin === 'function') checkAdminLogin();
});
// Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function deleteUser(userId) {
    console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù…:', userId);
    
    if (!confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹!')) {
        console.log('âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ù„ØºÙ‰ Ø§Ù„Ø­Ø°Ù');
        return;
    }
    
    try {
        const users = JSON.parse(localStorage.getItem('users') || '[]');
        console.log('ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø°Ù:', users.length);
        
        const userIndex = users.findIndex(u => u.id === userId);
        console.log('ğŸ” index Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', userIndex);
        
        if (userIndex !== -1) {
            const username = users[userIndex].username;
            const activationCode = users[userIndex].activationCode;
            
            // Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            users.splice(userIndex, 1);
            localStorage.setItem('users', JSON.stringify(users));
            console.log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† localStorage');
            
            // Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„
            const activationCodes = JSON.parse(localStorage.getItem('activationCodes') || '[]');
            const codeIndex = activationCodes.findIndex(c => c.code === activationCode);
            
            if (codeIndex !== -1) {
                activationCodes[codeIndex].used = false;
                activationCodes[codeIndex].usedBy = null;
                activationCodes[codeIndex].usedAt = null;
                localStorage.setItem('activationCodes', JSON.stringify(activationCodes));
                console.log('âœ… ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„');
            }
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… alert Ø¨Ø¯Ù„ showMessage Ù„Ù„ØªØ£ÙƒØ¯
            alert(`âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… "${username}" Ø¨Ù†Ø¬Ø§Ø­`);
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø¯Ù„ loadUsersList
            location.reload();
        } else {
            console.log('âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
            alert('âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
        }
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù:', error);
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø°Ù: ' + error.message);
    }
}
</script>
<script>
// ØªØ­Ù…ÙŠÙ„ script.js ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¥Ø°Ø§ Ù…Ø­Ù…Ù„Ø´
if (typeof showBackupManager === 'undefined') {
    const script = document.createElement('script');
    script.src = 'script.js?v=4';
    document.head.appendChild(script);
}
</script>
</body>
</html>